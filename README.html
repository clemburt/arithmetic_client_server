

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Table of Contents &mdash; arithmetic_client_server  documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=5929fcd5"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            arithmetic_client_server
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="readme.html">README</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules.html">Source code</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">CHANGELOG</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">arithmetic_client_server</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Table of Contents</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/README.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="table-of-contents">
<h1>Table of Contents<a class="headerlink" href="#table-of-contents" title="Link to this heading">ïƒ</a></h1>
<ul class="simple">
<li><p><a class="reference internal" href="#purpose"><span class="xref myst">Purpose</span></a></p>
<ul>
<li><p><a class="reference internal" href="#input-files"><span class="xref myst">Input files</span></a></p></li>
<li><p><a class="reference internal" href="#the-server-receives-information-using-tcp-sockets"><span class="xref myst">The server receives information using TCP sockets</span></a></p></li>
<li><p><a class="reference internal" href="#the-application-is-built-by-different-processes"><span class="xref myst">The application is built by different processes</span></a></p></li>
<li><p><a class="reference internal" href="#processes-lifecycle-is-monitored"><span class="xref myst">Processes lifecycle is monitored</span></a></p></li>
<li><p><a class="reference internal" href="#arithmetic-operations-are-performed-securely"><span class="xref myst">Arithmetic operations are performed securely</span></a></p></li>
<li><p><a class="reference internal" href="arithmetic_client_server.common.html#module-arithmetic_client_server.common.logger" title="arithmetic_client_server.common.logger"><span class="xref myst py py-mod">Logger</span></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#architecture"><span class="xref myst">Architecture</span></a></p></li>
<li><p><a class="reference internal" href="#installation"><span class="xref myst">Installation</span></a></p></li>
<li><p><a class="reference internal" href="#usage"><span class="xref myst">Usage</span></a></p></li>
<li><p><a class="reference internal" href="#tests"><span class="xref myst">Tests</span></a></p></li>
<li><p><a class="reference internal" href="#documentation"><span class="xref myst">Documentation</span></a></p></li>
<li><p><a class="reference internal" href="#license"><span class="xref myst">License</span></a></p></li>
<li><p><a class="reference internal" href="#authors"><span class="xref myst">Authors</span></a></p></li>
</ul>
</section>
<section id="purpose">
<h1>Purpose<a class="headerlink" href="#purpose" title="Link to this heading">ïƒ</a></h1>
<p><strong>arithmetic_client_server</strong> is a Python socket-based client/server application using multiprocessing and pipes to safely evaluate arithmetic operations from files</p>
<p>This application complies with the following guidelines:</p>
<section id="input-files">
<h2>Input files<a class="headerlink" href="#input-files" title="Link to this heading">ïƒ</a></h2>
<p>The input file which contains the arithmetic operations to perform must be a text file, compressed or not</p>
<p>The supported input file formats are: .txt, .zip, .tar.xz, .7z</p>
<p>Here is an example of an input file:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>38 - 83 - 52 + 30 - 24 - 89 / 66 + 18 / 7 * 77
57 + 87 - 24 * 27 / 8 + 53 - 87 * 6 * 60 - 30
63 * 23 - 91 - 17 * 45 + 63 * 52 - 50
47 - 88 + 32 - 71 * 39 * 68
43 * 47 - 75 + 94 * 35 - 60 + 55 + 8
49 - 97 + 17 + 31 / 37 + 82
74 - 36 - 96 + 32 + 2 + 26
43 - 45 - 66 - 52 - 6
41 / 50 + 53 + 40
</pre></div>
</div>
<p>Here is an example of the resulting output file:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>38 - 83 - 52 + 30 - 24 - 89 / 66 + 18 / 7 * 77 = 105.65151515151518
57 + 87 - 24 * 27 / 8 + 53 - 87 * 6 * 60 - 30 = -31234.0
63 * 23 - 91 - 17 * 45 + 63 * 52 - 50 = 3819.0
47 - 88 + 32 - 71 * 39 * 68 = -188301.0
43 * 47 - 75 + 94 * 35 - 60 + 55 + 8 = 5239.0
49 - 97 + 17 + 31 / 37 + 82 = 51.83783783783784
74 - 36 - 96 + 32 + 2 + 26 = 2.0
43 - 45 - 66 - 52 - 6 = -126.0
41 / 50 + 53 + 40 = 93.82
</pre></div>
</div>
</section>
<section id="the-server-receives-information-using-tcp-sockets">
<h2>The server receives information using TCP sockets<a class="headerlink" href="#the-server-receives-information-using-tcp-sockets" title="Link to this heading">ïƒ</a></h2>
<p>The application uses a single TCP connection between client and server for data exchange, while all parallel computation and inter-process communication are handled using multiprocessing and pipes, ensuring a clear separation between networking and computation</p>
<p>The application uses 2 TCP sockets:</p>
<ul class="simple">
<li><p>one listening socket on the server</p></li>
<li><p>and one active client-server connection socket</p></li>
</ul>
</section>
<section id="the-application-is-built-by-different-processes">
<h2>The application is built by different processes<a class="headerlink" href="#the-application-is-built-by-different-processes" title="Link to this heading">ïƒ</a></h2>
<ul class="simple">
<li><p>A main parent process, launched by the main to start the server (<code class="docutils literal notranslate"><span class="pre">server_process</span></code>)</p></li>
<li><p>A parent server process (<code class="docutils literal notranslate"><span class="pre">ArithmeticServer.start</span></code>) that accepts the connection, listens on the socket, orchestrates the workers and writes the results as they come in</p></li>
<li><p>A child worker process for each arithmetic operation (<code class="docutils literal notranslate"><span class="pre">WorkerProcess</span></code>), created dynamically for each line in the file, which sends the result via a <code class="docutils literal notranslate"><span class="pre">Pipe</span></code> and is immediately destroyed by the server after completion</p></li>
</ul>
<p>Therefore, the total number of active processes at any given time depends on the number of simultaneous workers, limited by <code class="docutils literal notranslate"><span class="pre">max_workers</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">max_workers</span> <span class="o">=</span> <span class="nb">min</span><span class="p">(</span><span class="n">cpu_count</span><span class="p">(),</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">))</span>
</pre></div>
</div>
</section>
<section id="processes-lifecycle-is-monitored">
<h2>Processes lifecycle is monitored<a class="headerlink" href="#processes-lifecycle-is-monitored" title="Link to this heading">ïƒ</a></h2>
<p>Child worker processes communicate their results to the server through multiprocessing pipes, which provide safe (minimum API, no explicit synchronisation with lock and semaphore) and simple (no shared memory) inter-process communication</p>
<p>The parent server process creates and destroys each child worker process after it computed its arithmetic operation and sent the result</p>
<p>Multiprocessing is used:</p>
<ul class="simple">
<li><p>instead of threading to bypass the Python Global Interpreter Lock (GIL), required by arithmetic operations which are executed as bytecode instructions, and to achieve true CPU parallelism (because GIL would only allow one thread at a time to execute bytecode)</p></li>
<li><p>while avoiding pools to maintain strict control over workers creation and destruction, because pools recycle workers for multiple tasks and automatically manage the lifecycle of processes</p></li>
</ul>
</section>
<section id="arithmetic-operations-are-performed-securely">
<h2>Arithmetic operations are performed securely<a class="headerlink" href="#arithmetic-operations-are-performed-securely" title="Link to this heading">ïƒ</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">eval()</span></code> method has been prohibited because it would allow arbitrary Python code execution from untrusted client input, which is unacceptable in a networked multiprocessing server:</p>
<ul class="simple">
<li><p>this Remote Code Execution (RCE) could lead to the execution of system commands, data leaks, total server compromise, etc.</p></li>
<li><p>there would be no validation of arithmetic operators, because anything that is syntactically valid would be accepted, not just <code class="docutils literal notranslate"><span class="pre">+</span></code>, <code class="docutils literal notranslate"><span class="pre">-</span></code>, <code class="docutils literal notranslate"><span class="pre">*</span></code>, and <code class="docutils literal notranslate"><span class="pre">/</span></code></p></li>
<li><p>the server would be less robust in the event of an <code class="docutils literal notranslate"><span class="pre">eval()</span></code> command failure, which could raise various exceptions that are difficult to debug</p></li>
</ul>
</section>
<section id="logger">
<h2>Logger<a class="headerlink" href="#logger" title="Link to this heading">ïƒ</a></h2>
<p>In this multiprocessing client/server application, using structured logging instead of console <code class="docutils literal notranslate"><span class="pre">print()</span></code> ensures clear, timestamped, process-safe, and level-specific output, making debugging and monitoring reliable across multiple worker processes</p>
</section>
</section>
<section id="architecture">
<h1>Architecture<a class="headerlink" href="#architecture" title="Link to this heading">ïƒ</a></h1>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚     Main parent process      â”‚
                           â”‚          CLI / CI            â”‚
                           â”‚         (main.py)            â”‚
                           â”‚                              â”‚
                           â”‚  - Parse arguments           â”‚
                           â”‚  - Build output_path         â”‚
                           â”‚  - Start server process      â”‚
                           â”‚  - Run ArithmeticClient      â”‚
                           â”‚    (connect, send file,      â”‚
                           â”‚     receive results)         â”‚
                           â”‚                              â”‚
                           â”‚   TCP CLIENT SOCKET          â”‚
                           â”‚   connect(host, port)        â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
                                         â”‚
                                         â–¼
                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                           â”‚    Server parent process     â”‚
                           â”‚      (ArithmeticServer)      â”‚
                           â”‚                              â”‚
                           â”‚  TCP LISTEN SOCKET           â”‚
                           â”‚  - bind(host, port)          â”‚
                           â”‚  - listen()                  â”‚
                           â”‚  - accept()                  â”‚
                           â”‚                              â”‚
                           â”‚  - Receive operations        â”‚
                           â”‚  - Orchestrate workers       â”‚
                           â”‚  - Collect results via Pipes â”‚
                           â”‚  - Write results to file     â”‚
                           â”‚  - Send results to client    â”‚
                           â”‚                              â”‚
                           â”‚  TCP CONNECTION SOCKET       â”‚
                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚                    Multiprocessing Pipes                     â”‚
          â”‚   (worker â†’ server): results sent immediately as they are    â”‚
          â”‚   computed, server terminates each worker once done          â”‚
          â–¼                                                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Worker child process #1   â”‚                            â”‚    Worker child process #N   â”‚
â”‚                              â”‚                            â”‚                              â”‚
â”‚  - Compute ONE operation     â”‚                            â”‚  - Compute ONE operation     â”‚
â”‚  - Send result via Pipe      â”‚                            â”‚  - Send result via Pipe      â”‚
â”‚  - Terminate immediately     â”‚                            â”‚  - Terminate immediately     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â–²                                                                â–²
          â”‚                                                                â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Workers are dynamically spawned per line â”€â”€â”€â”€â”€â”€â”€â”˜
</pre></div>
</div>
</section>
<section id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Link to this heading">ïƒ</a></h1>
<p>Make sure you have <a class="reference external" href="https://pdm.fming.dev/">PDM</a> installed</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pdm<span class="w"> </span>install
</pre></div>
</div>
<p>If running inside Docker, you can use the published image:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>pull<span class="w"> </span>ghcr.io/clemburt/arithmetic_client_server:latest
</pre></div>
</div>
</section>
<section id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Link to this heading">ïƒ</a></h1>
<p>You can use the CLI either locally or from the Docker container</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sekoia<span class="w"> </span>--help
</pre></div>
</div>
<p>Output:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>usage:<span class="w"> </span>sekoia<span class="w"> </span><span class="o">[</span>-h<span class="o">]</span><span class="w"> </span>file_path

Arithmetic<span class="w"> </span>client/server<span class="w"> </span>integration<span class="w"> </span>runner

positional<span class="w"> </span>arguments:
<span class="w">  </span>file_path<span class="w">   </span>Path<span class="w"> </span>to<span class="w"> </span>the<span class="w"> </span>file<span class="w"> </span>containing<span class="w"> </span>arithmetic<span class="w"> </span>operations

options:
<span class="w">  </span>-h,<span class="w"> </span>--help<span class="w">  </span>show<span class="w"> </span>this<span class="w"> </span><span class="nb">help</span><span class="w"> </span>message<span class="w"> </span>and<span class="w"> </span><span class="nb">exit</span>
</pre></div>
</div>
<p>Examples:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sekoia<span class="w"> </span>src/arithmetic_client_server/resources/operations.txt
</pre></div>
</div>
</section>
<section id="tests">
<h1>Tests<a class="headerlink" href="#tests" title="Link to this heading">ïƒ</a></h1>
<p>Run the test suite using:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pdm<span class="w"> </span>install<span class="w"> </span>-dG<span class="w"> </span><span class="nb">test</span>
pdm<span class="w"> </span><span class="nb">test</span>
</pre></div>
</div>
<p>The Docker image installs only production dependencies (â€“prod), so tests must be run explicitly with test group install:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>ghcr.io/clemburt/arithmetic_client_server:latest<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>sh<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;pdm install -dG test &amp;&amp; pdm test&quot;</span>
</pre></div>
</div>
<p>This will:</p>
<ul class="simple">
<li><p>Sync test dependencies</p></li>
<li><p>Run all tests with coverage reporting</p></li>
</ul>
</section>
<section id="documentation">
<h1>Documentation<a class="headerlink" href="#documentation" title="Link to this heading">ïƒ</a></h1>
<p>Build the sphinx documentation using</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pdm<span class="w"> </span>install<span class="w"> </span>-dG<span class="w"> </span>doc
pdm<span class="w"> </span>doc
</pre></div>
</div>
<p>The Docker image installs only production dependencies (â€“prod), so doc must be run explicitly with doc group install:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>docker<span class="w"> </span>run<span class="w"> </span>--rm<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>ghcr.io/clemburt/arithmetic_client_server:latest<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>sh<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;pdm install -dG doc &amp;&amp; pdm doc&quot;</span>
</pre></div>
</div>
<p>ğŸ“š <a class="reference external" href="https://clemburt.github.io/arithmetic_client_server/">Documentation</a></p>
</section>
<section id="license">
<h1>License<a class="headerlink" href="#license" title="Link to this heading">ïƒ</a></h1>
<p>MIT License</p>
</section>
<section id="authors">
<h1>Authors<a class="headerlink" href="#authors" title="Link to this heading">ïƒ</a></h1>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/clemburt">BURTSCHER ClÃ©ment</a></p></li>
</ul>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Clement Burtscher.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>